spryk: template
description: 'Adds a new *resourceType*By*relationshipParameter*ResourceRelationshipPlugin to the Glue application.'
mode: both
arguments:
    module:
        inherit: true
    organization:
        inherit: true
        default: Spryker
    template:
        value: Glue/Plugin/GlueApplication/GlueResourceRelationshipPlugin.php.twig
    resourceType:
        inherit: true
    relationshipParameter:
        inherit: true
    pluginClassName:
        value: '{{ resourceType | dashToCamelCase | singularize }}By{{ relationshipParameter | dashToCamelCase }}ResourceRelationshipPlugin'
    extends:
        value: '{{ resourceType | dashToCamelCase | singularize }}By{{ relationshipParameter | dashToCamelCase }}Expander'
    targetFilename:
        value: '{{ pluginClassName }}.php'
    targetPath:
        value: 'src/{{ organization }}/Glue/{{ module }}/Plugin/GlueApplication/'
preSpryks:
    - AddModule
    -
        AddSharedRestAttributesTransfer:
            arguments:
                name:
                    value: '{{ resourceType | dashToCamelCase }}'
                    callback:
                        - EnsureRestAttributesTransferAffix
    -
        AddGlueConfigConstant:
            arguments:
                name: 'RESOURCE_{{ resourceType | dashToUnderscore | upper }}'
                value: '{{ resourceType | dasherize }}'
                visibility: public
    -
        AddGlueFactoryMethod:
            arguments:
                subDirectory: Expander
                className: '{{ extends }}'
    -
        AddGlueProcessorModelMethod:
            arguments:
                className: '{{ extends }}'
                subDirectory: Expander
                modelSuffix: Expander
                method: addResourceRelationships
                input: '\Spryker\Glue\GlueApplication\Rest\JsonApi\RestResourceInterface[] $resources, \Spryker\Glue\GlueApplication\Rest\Request\Data\RestRequestInterface $restRequest'
                output: '\Spryker\Glue\GlueApplication\Rest\JsonApi\RestResourceInterface[]'
